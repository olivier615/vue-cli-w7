"use strict";(self["webpackChunkcli_demo"]=self["webpackChunkcli_demo"]||[]).push([[132],{7132:function(l,t,o){o.r(t),o.d(t,{default:function(){return ol}});var e=o(3396),a=o(9242);const i=(0,e._)("h2",null,"單一產品頁面",-1),s={class:"modal-dialog modal-xl"},r={class:"modal-content border-0"},c={class:"modal-header bg-dark text-white"},d={id:"productModalLabel",class:"modal-title"},n={key:0},p={key:1},u={class:"modal-body"},m={class:"row"},h={class:"col-sm-4"},b={class:"mb-3"},g=(0,e._)("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),_=["src"],f=(0,e._)("h3",{class:"mb-3"},"多圖新增",-1),v={key:0},y={class:"mb-3"},U=(0,e._)("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),w=["onUpdate:modelValue"],k=["src"],x={key:0},L={key:1},V={class:"col-sm-8"},C={class:"mb-3"},$=(0,e._)("label",{for:"title",class:"form-label"},"標題",-1),D={class:"row"},E={class:"mb-3 col-md-6"},P=(0,e._)("label",{for:"category",class:"form-label"},"分類",-1),N={class:"mb-3 col-md-6"},q=(0,e._)("label",{for:"price",class:"form-label"},"單位",-1),A={class:"row"},H={class:"mb-3 col-md-6"},I=(0,e._)("label",{for:"origin_price",class:"form-label"},"原價",-1),Y={class:"mb-3 col-md-6"},z=(0,e._)("label",{for:"price",class:"form-label"},"售價",-1),F={class:"row"},K={class:"mb-3 col-md-6"},M=(0,e._)("label",{for:"origin_place",class:"form-label"},"原產地",-1),S=(0,e._)("hr",null,null,-1),W={class:"mb-3"},Z=(0,e._)("label",{for:"description",class:"form-label"},"產品描述",-1),j={class:"mb-3"},B=(0,e._)("label",{for:"content",class:"form-label"},"說明內容",-1),G={class:"mb-3"},J={class:"form-check"},O=(0,e._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),Q={class:"modal-footer"};function R(l,t,o,R,T,X){const ll=(0,e.up)("Loading");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(ll,{active:T.isLoading,"z-index":1060},null,8,["active"]),i,(0,e._)("div",s,[(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("h5",d,[T.isNew?((0,e.wg)(),(0,e.iD)("span",n,"新增產品")):((0,e.wg)(),(0,e.iD)("span",p,"編輯產品"))]),(0,e._)("button",{type:"button",class:"btn-close bg-light","aria-label":"Close",onClick:t[0]||(t[0]=(...l)=>X.cancelEdit&&X.cancelEdit(...l))})]),(0,e._)("div",u,[(0,e._)("div",m,[(0,e._)("div",h,[(0,e._)("div",b,[g,(0,e._)("input",{type:"file",class:"form-control mb-3",id:"file",onChange:t[1]||(t[1]=(...l)=>X.upload&&X.upload(...l)),placeholder:"選擇圖片上傳"},null,32),(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>T.product.imageUrl=l),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[a.nr,T.product.imageUrl]]),(0,e._)("img",{class:"img-fluid",src:T.product.imageUrl},null,8,_)]),f,Array.isArray(T.product.imagesUrl)?((0,e.wg)(),(0,e.iD)("div",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(T.product.imagesUrl,((l,t)=>((0,e.wg)(),(0,e.iD)("div",{class:"mb-1",key:t},[(0,e._)("div",y,[U,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":l=>T.product.imagesUrl[t]=l},null,8,w),[[a.nr,T.product.imagesUrl[t]]])]),(0,e._)("img",{class:"img-fluid",src:l},null,8,k)])))),128)),!T.product.imagesUrl.length||T.product.imagesUrl[T.product.imagesUrl.length-1]?((0,e.wg)(),(0,e.iD)("div",x,[(0,e._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=l=>T.product.imagesUrl.push(""))}," 新增圖片 ")])):(0,e.kq)("",!0),(0,e._)("div",null,[(0,e._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[4]||(t[4]=l=>T.product.imagesUrl.pop())}," 刪除圖片 ")])])):((0,e.wg)(),(0,e.iD)("div",L,[(0,e._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[5]||(t[5]=l=>X.createImagesUrl())}," 新增圖片 ")]))]),(0,e._)("div",V,[(0,e._)("div",C,[$,(0,e.wy)((0,e._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[6]||(t[6]=l=>T.product.title=l)},null,512),[[a.nr,T.product.title]])]),(0,e._)("div",D,[(0,e._)("div",E,[P,(0,e.wy)((0,e._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[7]||(t[7]=l=>T.product.category=l)},null,512),[[a.nr,T.product.category]])]),(0,e._)("div",N,[q,(0,e.wy)((0,e._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[8]||(t[8]=l=>T.product.unit=l)},null,512),[[a.nr,T.product.unit]])])]),(0,e._)("div",A,[(0,e._)("div",H,[I,(0,e.wy)((0,e._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[9]||(t[9]=l=>T.product.origin_price=l)},null,512),[[a.nr,T.product.origin_price,void 0,{number:!0}]])]),(0,e._)("div",Y,[z,(0,e.wy)((0,e._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[10]||(t[10]=l=>T.product.price=l)},null,512),[[a.nr,T.product.price,void 0,{number:!0}]])])]),(0,e._)("div",F,[(0,e._)("div",K,[M,(0,e.wy)((0,e._)("input",{id:"origin_place",type:"text",class:"form-control",placeholder:"請輸入原產地","onUpdate:modelValue":t[11]||(t[11]=l=>T.product.origin_place=l)},null,512),[[a.nr,T.product.origin_place]])])]),S,(0,e._)("div",W,[Z,(0,e.wy)((0,e._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[12]||(t[12]=l=>T.product.description=l)},"\r\n                  ",512),[[a.nr,T.product.description]])]),(0,e._)("div",j,[B,(0,e.wy)((0,e._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[13]||(t[13]=l=>T.product.content=l)},"\r\n                  ",512),[[a.nr,T.product.content]])]),(0,e._)("div",G,[(0,e._)("div",J,[(0,e.wy)((0,e._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[14]||(t[14]=l=>T.product.is_enabled=l)},null,512),[[a.e8,T.product.is_enabled]]),O])])])])]),(0,e._)("div",Q,[(0,e._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[15]||(t[15]=(...l)=>X.cancelEdit&&X.cancelEdit(...l))}," 取消 "),(0,e._)("button",{type:"button",class:"btn btn-primary",onClick:t[16]||(t[16]=(...l)=>X.updateProduct&&X.updateProduct(...l))}," 確認 ")])])])],64)}let T=null;var X={data(){return{isLoading:!1,product:{imagesUrl:[]},isNew:!1}},methods:{getProduct(){this.isLoading=!0;const{id:l}=this.$route.params;void 0===l?(this.isNew=!0,this.isLoading=!1):this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/otispath/product/${l}`).then((l=>{this.product=l.data.product,this.isLoading=!1})).catch((l=>{this.isLoading=!1,console.log(l)}))},upload(){this.isLoading=!0;const l=T.files[0],t=new FormData;t.append("file-to-upload",l),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/upload/",t).then((l=>{console.log(l.data.imageUrl),this.product.imageUrl=l.data.imageUrl,this.isLoading=!1})).catch((l=>{console.log(l),this.isLoading=!1}))},createImagesUrl(){this.product.imagesUrl=[],this.product.imagesUrl.push("")},updateProduct(){this.isLoading=!0,this.isNew?this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product",{data:this.product}).then((l=>{alert(l.data.message),this.isLoading=!1,this.$router.push("/admin/products")})).catch((l=>{this.isLoading=!1,alert(l)})):this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product/${this.product.id}`,{data:this.product}).then((l=>{alert(l.data.message),this.isLoading=!1,this.$router.push("/admin/products")})).catch((l=>{this.isLoading=!1,alert(l)}))},cancelEdit(){this.product={imagesUrl:[]},this.$router.push("/admin/products")}},mounted(){this.getProduct(),T=document.querySelector("#file")}},ll=o(89);const tl=(0,ll.Z)(X,[["render",R]]);var ol=tl}}]);
//# sourceMappingURL=132.1f008d25.js.map