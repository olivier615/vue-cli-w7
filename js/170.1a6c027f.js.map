{"version":3,"file":"js/170.1a6c027f.js","mappings":"6LAEEA,EAAAA,EAAAA,GAAgB,UAAZ,WAAO,G,GACNC,MAAM,a,GACJA,MAAM,iB,WAEW,Y,GAIfA,MAAM,c,GACXD,EAAAA,EAAAA,GASQ,eARNA,EAAAA,EAAAA,GAOK,YANHA,EAAAA,EAAAA,GAAuB,MAAnBE,MAAM,OAAM,OAChBF,EAAAA,EAAAA,GAAsB,MAAlBE,MAAM,MAAK,OACfF,EAAAA,EAAAA,GAAsB,MAAlBE,MAAM,MAAK,OACfF,EAAAA,EAAAA,GAAyB,MAArBE,MAAM,OAAM,SAChBF,EAAAA,EAAAA,GAAuB,MAAnBE,MAAM,OAAM,OAChBF,EAAAA,EAAAA,GAAuB,MAAnBE,MAAM,OAAM,UAPpB,G,uBAqBWD,MAAM,a,WAGR,Q,uLAlCfE,EAAAA,EAAAA,IAAuDC,EAAA,CAA7CC,OAAQC,EAAAA,UAAY,UAAS,MAAvC,mBACEC,GACAP,EAAAA,EAAAA,GAoDM,MApDN,EAoDM,EAnDJA,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJG,EAAAA,EAAAA,IAGcK,EAAA,CAHDP,MAAM,kBACnBQ,GAAG,kBADH,C,kBACoB,IAEpB,M,SAEFT,EAAAA,EAAAA,GAuCQ,QAvCR,EAuCQ,CAtCNU,GAUAV,EAAAA,EAAAA,GA2BQ,6BA1BNW,EAAAA,EAAAA,IAyBKC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAzBiBP,EAAAA,UAAXQ,K,WAAXH,EAAAA,EAAAA,IAyBK,MAzB4BI,IAAKD,EAAQE,OAA9C,EACEhB,EAAAA,EAAAA,GAA0B,WAAAiB,EAAAA,EAAAA,IAApBH,EAAQE,OAAK,IACnBhB,EAAAA,EAAAA,GAAwB,WAAAiB,EAAAA,EAAAA,IAAlBH,EAAQI,KAAG,IACjBlB,EAAAA,EAAAA,GAA2B,WAAAiB,EAAAA,EAAAA,IAArBH,EAAQK,QAAM,IACpBnB,EAAAA,EAAAA,GAAoE,WAAAiB,EAAAA,EAAAA,IAAAA,IAA1DG,KAAsB,IAAjBN,EAAQO,WAAkBC,sBAAkB,IAC3DtB,EAAAA,EAAAA,GAGK,WAFSc,EAAQS,WAAAA,EAAAA,EAAAA,OAApBZ,EAAAA,EAAAA,IAAwC,OAAAa,EAAV,UAA9B,WACAb,EAAAA,EAAAA,IAAuB,OAAAc,EAAV,WAEfzB,EAAAA,EAAAA,GAeK,YAdHA,EAAAA,EAAAA,GAaM,MAbN,EAaM,EAZJG,EAAAA,EAAAA,IAIcK,EAAA,CAJAC,GAAE,kBAAoBK,EAAQY,KAC5CzB,MAAM,kCADN,C,kBAEC,IAED,M,KAJA,cAKAD,EAAAA,EAAAA,GAMS,UALP2B,KAAK,SACL1B,MAAM,gCACL2B,QAAK,GAAEC,EAAAA,uBAAwBf,IACjC,OAED,EAAAgB,YAtBN,WA6BJ3B,EAAAA,EAAAA,IAAyE4B,EAAA,CAA5DC,MAAO1B,EAAAA,WAAa2B,cAAcJ,EAAAA,aAA/C,mCACA1B,EAAAA,EAAAA,IAE+D+B,EAAA,CAF/CpB,QAASR,EAAAA,QACzB6B,IAAI,kBACHC,SAAM,eAAEP,EAAAA,YAAYvB,EAAAA,WAAW+B,gBAFhC,uBAjDF,I,uBCDEX,GAAG,kBACHS,IAAI,QACJlC,MAAM,aACNqC,SAAS,KACT,kBAAgB,kBAChB,cAAY,Q,GAEPrC,MAAM,gB,GACJA,MAAM,0B,GACTD,EAAAA,EAAAA,GAUM,OAVDC,MAAM,qCAAmC,EAC5CD,EAAAA,EAAAA,GAEK,MAFD0B,GAAG,kBAAkBzB,MAAM,eAA/B,EACED,EAAAA,EAAAA,GAAiB,YAAX,WAERA,EAAAA,EAAAA,GAKU,UAJR2B,KAAK,SACL1B,MAAM,YACN,kBAAgB,QAChB,aAAW,YARf,G,GAWKA,MAAM,c,GACNA,MAAM,e,GAEPD,EAAAA,EAAAA,GAAkD,UAA1CC,MAAM,eAAc,iBAAa,G,GAGxCA,MAAM,gB,GACTD,EAAAA,EAAAA,GAMS,UALP2B,KAAK,SACL1B,MAAM,4BACN,kBAAgB,SACjB,QAED,G,0CAlCRU,EAAAA,EAAAA,IA0CM,MA1CN,EA0CM,EAlCJX,EAAAA,EAAAA,GAiCM,MAjCN,EAiCM,EAhCJA,EAAAA,EAAAA,GA+BM,MA/BN,EA+BM,CA9BJuC,GAWAvC,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJA,EAAAA,EAAAA,GAGI,IAHJ,EAGI,UAHmB,SACjBiB,EAAAA,EAAAA,IAAEuB,EAAAA,QAAQxB,OAAO,KACrB,GAAAQ,OAGJxB,EAAAA,EAAAA,GAYM,MAZN,EAYM,CAXJyC,GAOAzC,EAAAA,EAAAA,GAGS,UAHD2B,KAAK,SAAS1B,MAAM,iBAC3B2B,QAAK,oBAAEC,EAAAA,eAAAA,EAAAA,iBAAAA,KAAe,iBApC/B,K,uBA+CF,GACEa,OACE,MAAO,CACLC,MAAO,KAGXC,MAAO,CAAC,WACRC,QAAS,CACPC,gBACEC,KAAKC,MAAMC,OAAQ,sEAA2EF,KAAKjC,QAAQY,MACxGwB,MAAKC,IACJC,MAAMD,EAAIT,KAAKW,SACfN,KAAKO,YACLP,KAAKQ,MAAM,aAEZC,OAAMC,IACLL,MAAMK,EAAIJ,aAGhBK,YACEX,KAAKJ,MAAMgB,QAEbL,YACEP,KAAKJ,MAAMiB,SAGfC,UACEd,KAAKJ,MAAQ,IAAImB,IAAJ,CAAUf,KAAKgB,MAAMpB,MAAO,CACvCqB,UAAU,EACVC,SAAU,a,QCxEhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QFsDA,GACEC,WAAY,CACVC,WADU,IAEVtB,cAAAA,GAEFJ,OACE,MAAO,CACL2B,WAAW,EACXD,WAAY,GACZE,OAAO,EACPC,SAAU,GACVzD,QAAS,KAGb+B,QAAS,CACP2B,YAAaC,EAAO,GAClB1B,KAAKsB,WAAY,EACjBtB,KAAKC,MAAM0B,IAAK,6EAAkFD,KAC/FvB,MAAKC,IACJwB,QAAQC,IAAIzB,GACZJ,KAAKwB,SAAWpB,EAAIT,KAAK6B,SACzBxB,KAAKqB,WAAajB,EAAIT,KAAK0B,WAC3BrB,KAAKsB,WAAY,KAElBb,OAAM,KACLT,KAAKsB,WAAY,EACjBjB,MAAM,gBAGZyB,uBAAwB/D,GACtBiC,KAAKjC,QAAUA,EACfiC,KAAKgB,MAAMe,gBAAgBpB,cAG/BG,UACEd,KAAKyB,gBG3FT,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASO,KAEpE","sources":["webpack://cli-demo/./src/views/AdminArticles.vue","webpack://cli-demo/./src/components/DeleteArticle.vue","webpack://cli-demo/./src/components/DeleteArticle.vue?f67c","webpack://cli-demo/./src/views/AdminArticles.vue?2bbf"],"sourcesContent":["<template>\r\n<Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\r\n  <h2>後台-文章列表</h2>\r\n  <div class=\"container\">\r\n    <div class=\"text-end mt-4\">\r\n      <router-link class=\"btn btn-primary\"\r\n      to=\"/admin/article\">\r\n        建立新的文章\r\n      </router-link>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th width=\"120\">名稱</th>\r\n          <th width=\"60\">標籤</th>\r\n          <th width=\"60\">作者</th>\r\n          <th width=\"120\">建立時間</th>\r\n          <th width=\"120\">發布</th>\r\n          <th width=\"120\">編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"article in articles\" :key=\"article.title\">\r\n          <td>{{article.title}}</td>\r\n          <td>{{article.tag}}</td>\r\n          <td>{{article.author}}</td>\r\n          <td>{{new Date(article.create_at * 1000).toLocaleDateString()}}</td>\r\n          <td>\r\n            <span v-if=\"article.isPublic\">啟用中</span>\r\n            <span v-else>未啟用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <router-link :to=\"`/admin/article/${article.id}`\"\r\n              class=\"btn btn-outline-primary btn-sm\"\r\n              >\r\n                編輯\r\n              </router-link>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"OpenDeleteArticleModal (article)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <!-- 分頁元件 -->\r\n    <pagination :pages=\"pagination\" @get-products=\"getArticles\"></pagination>\r\n    <deleteArticle :article=\"article\"\r\n    ref=\"delArticleModal\"\r\n    @update=\"getArticles(pagination.current_page)\"></deleteArticle>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport pagination from '@/components/PageView.vue'\r\nimport deleteArticle from '@/components/DeleteArticle.vue'\r\nexport default {\r\n  components: {\r\n    pagination,\r\n    deleteArticle\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      pagination: {},\r\n      isNew: false,\r\n      articles: [],\r\n      article: {}\r\n    }\r\n  },\r\n  methods: {\r\n    getArticles (page = 1) {\r\n      this.isLoading = true\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/articles/?page=${page}`)\r\n        .then(res => {\r\n          console.log(res)\r\n          this.articles = res.data.articles\r\n          this.pagination = res.data.pagination\r\n          this.isLoading = false\r\n        })\r\n        .catch(() => {\r\n          this.isLoading = false\r\n          alert('無法取得文章列表')\r\n        })\r\n    },\r\n    OpenDeleteArticleModal (article) {\r\n      this.article = article\r\n      this.$refs.delArticleModal.openModal()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getArticles()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div\r\n    id=\"delArticleModal\"\r\n    ref=\"modal\"\r\n    class=\"modal fade\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"delArticleModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-danger text-white\">\r\n          <h5 id=\"delArticleModal\" class=\"modal-title\">\r\n            <span>刪除文章</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p class=\"text-center\">\r\n            確定刪除{{article.title}}？\r\n            <strong class=\"text-danger\">(刪除文章後將無法恢復)。</strong>\r\n          </p>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-danger\"\r\n          @click=\"deleteArticle\">\r\n            確認刪除\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\nexport default {\r\n  data () {\r\n    return {\r\n      modal: ''\r\n    }\r\n  },\r\n  props: ['article'],\r\n  methods: {\r\n    deleteArticle () {\r\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/article/${this.article.id}`)\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.hideModal()\r\n          this.$emit('update')\r\n        })\r\n        .catch(err => {\r\n          alert(err.message)\r\n        })\r\n    },\r\n    openModal () {\r\n      this.modal.show()\r\n    },\r\n    hideModal () {\r\n      this.modal.hide()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal = new Modal(this.$refs.modal, {\r\n      keyboard: false,\r\n      backdrop: 'static'\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./DeleteArticle.vue?vue&type=template&id=f96f0454\"\nimport script from \"./DeleteArticle.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteArticle.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\cli-demo - w7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./AdminArticles.vue?vue&type=template&id=13b28863\"\nimport script from \"./AdminArticles.vue?vue&type=script&lang=js\"\nexport * from \"./AdminArticles.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\cli-demo - w7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","width","_createVNode","_component_Loading","active","$data","_hoisted_1","_component_router_link","to","_hoisted_6","_createElementBlock","_Fragment","_renderList","article","key","title","_toDisplayString","tag","author","Date","create_at","toLocaleDateString","isPublic","_hoisted_7","_hoisted_8","id","type","onClick","$options","_hoisted_11","_component_pagination","pages","onGetProducts","_component_deleteArticle","ref","onUpdate","current_page","tabindex","_hoisted_4","$props","_hoisted_9","data","modal","props","methods","deleteArticle","this","$http","delete","then","res","alert","message","hideModal","$emit","catch","err","openModal","show","hide","mounted","Modal","$refs","keyboard","backdrop","__exports__","components","pagination","isLoading","isNew","articles","getArticles","page","get","console","log","OpenDeleteArticleModal","delArticleModal","render"],"sourceRoot":""}