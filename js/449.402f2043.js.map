{"version":3,"file":"js/449.402f2043.js","mappings":"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","sources":["webpack://cli-demo/./src/views/AdminCoupon.vue","webpack://cli-demo/./src/views/AdminCoupon.vue?075a"],"sourcesContent":["<template>\r\n<Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\r\n  <h2>新增/編輯優惠券</h2>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"bg-dark text-white p-2 mb-3\">\r\n        <h5 class=\"modal-title\">\r\n          <span v-if=\"isNew\">新增產品</span>\r\n          <span v-else>編輯產品</span>\r\n        </h5>\r\n      </div>\r\n      <form @submit.prevent=\"updateCoupon\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"couponName\" class=\"form-label\">優惠券名稱</label>\r\n          <input\r\n          v-model=\"coupon.title\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"couponName\"/>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"couponPercent\" class=\"form-label\">優惠券折扣</label>\r\n          <input\r\n          v-model=\"coupon.percent\"\r\n            type=\"number\"\r\n            class=\"form-control\"\r\n            id=\"couponPercent\"\r\n          />\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"couponCode\" class=\"form-label\">優惠券折扣碼</label>\r\n          <input\r\n          v-model=\"coupon.code\"\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"couponCode\"\r\n          />\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"due_date\" class=\"form-label\">優惠券期限</label>\r\n          <input\r\n            v-model=\"date\"\r\n            type=\"date\"\r\n            class=\"form-control\"\r\n            id=\"due_date\"\r\n          />\r\n        </div>\r\n        <div class=\"mb-3 form-check\">\r\n          <input type=\"checkbox\" class=\"form-check-input\" :checked=\"coupon.is_enabled\"\r\n          v-model=\"changeBoolean\"\r\n          id=\"is_enabled\" />\r\n          <label class=\"form-check-label\" for=\"is_enabled\">是否啟用</label>\r\n        </div>\r\n        <div class=\"text-end\">\r\n        <router-link class=\"btn btn-outline-secondary me-2\" to=\"/admin/coupons\">取消</router-link>\r\n        <button type=\"submit\" class=\"btn btn-primary\">確認</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      isNew: false,\r\n      date: '',\r\n      changeBoolean: false,\r\n      coupon: {\r\n        title: '',\r\n        is_enabled: 0,\r\n        percent: 0,\r\n        due_date: 0,\r\n        code: ''\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    changeBoolean () {\r\n      if (this.changeBoolean) {\r\n        this.coupon.is_enabled = 1\r\n      } else {\r\n        this.coupon.is_enabled = 0\r\n      }\r\n    },\r\n    date () {\r\n      this.coupon.due_date = new Date(this.date).getTime() / 1000\r\n    }\r\n  },\r\n  methods: {\r\n    updateCoupon () {\r\n      this.isLoading = true\r\n      if (this.isNew) {\r\n        this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon`,\r\n          { data: this.coupon })\r\n          .then(res => {\r\n            alert('優惠券已新增')\r\n            this.isLoading = false\r\n            this.$router.push('/admin/coupons')\r\n          })\r\n          .catch((err) => {\r\n            console.log(err.message)\r\n            this.isLoading = false\r\n          })\r\n      } else {\r\n        const { id } = this.$route.params\r\n        this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${id}`,\r\n          { data: this.coupon })\r\n          .then(res => {\r\n            alert('優惠券已更新')\r\n            this.isLoading = false\r\n            this.$router.push('/admin/coupons')\r\n          })\r\n          .catch(err => {\r\n            console.log(err.message)\r\n            this.isLoading = false\r\n          })\r\n      }\r\n    },\r\n    getCoupon () {\r\n      this.isLoading = true\r\n      const { id } = this.$route.params\r\n      if (id === undefined) {\r\n        this.isNew = true\r\n        this.isLoading = false\r\n      } else {\r\n        this.isNew = false\r\n        this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupons`)\r\n          .then(res => {\r\n            const couponArr = res.data.coupons.filter(item => {\r\n              return item.id === id\r\n            })\r\n            this.coupon = couponArr[0]\r\n            const changeDate = new Date(this.coupon.due_date * 1000)\r\n            const year = changeDate.getFullYear()\r\n            let month = changeDate.getMonth() + 1\r\n            let day = changeDate.getDate()\r\n            // 若月份是 1~9 就補 0\r\n            if (month < 10) {\r\n              month = `0${month}`\r\n            }\r\n            // 若日期是 1 ~ 9 那就補 0\r\n            if (day < 10) {\r\n              day = `0${day}`\r\n            }\r\n            this.date = `${year}-${month}-${day}`\r\n            this.isLoading = false\r\n          })\r\n          .catch(() => {\r\n            console.log('無法取得優惠券資料')\r\n            this.isLoading = false\r\n          })\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCoupon()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./AdminCoupon.vue?vue&type=template&id=6dc91720\"\nimport script from \"./AdminCoupon.vue?vue&type=script&lang=js\"\nexport * from \"./AdminCoupon.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\cli-demo - w7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","for","type","_createVNode","_component_Loading","active","$data","_hoisted_1","_createElementBlock","_hoisted_6","_hoisted_7","onSubmit","$options","_hoisted_9","title","$event","id","_hoisted_11","percent","_hoisted_13","code","_hoisted_15","checked","is_enabled","_hoisted_18","_component_router_link","to","_hoisted_21","data","isLoading","isNew","date","changeBoolean","coupon","due_date","watch","this","Date","getTime","methods","updateCoupon","$http","post","then","res","alert","$router","push","catch","err","console","log","message","$route","params","put","getCoupon","undefined","get","couponArr","coupons","filter","item","changeDate","year","getFullYear","month","getMonth","day","getDate","mounted","__exports__","render"],"sourceRoot":""}